covid died data set
2    0.641717
1    0.358283
Name: SEX, dtype: float64
covid data set
2    0.547521
1    0.452479
Name: SEX, dtype: float64
1
2
len of all features 22
USMER [0 1]
MEDICAL_UNIT [ 1  0  3  4  5  6  7  8  9 10 11 12 13]
SEX [0 1]
PATIENT_TYPE [0]
DATE_DIED ['09/06/2020' '05/04/2020' '08/05/2020' '20/05/2020' '18/02/2020'
 '07/03/2020' '14/03/2020' '18/03/2020' '27/03/2020' '28/03/2020'
 '29/03/2020' '02/04/2020' '06/04/2020' '07/04/2020' '08/04/2020'
 '09/04/2020' '10/04/2020' '11/04/2020' '12/04/2020' '13/04/2020'
 '14/04/2020' '15/04/2020' '17/04/2020' '18/04/2020' '20/04/2020'
 '21/04/2020' '22/04/2020' '23/04/2020' '24/04/2020' '25/04/2020'
 '26/04/2020' '27/04/2020' '28/04/2020' '29/04/2020' '30/04/2020'
 '01/05/2020' '02/05/2020' '03/05/2020' '04/05/2020' '05/05/2020'
 '06/05/2020' '07/05/2020' '09/05/2020' '10/05/2020' '11/05/2020'
 '12/05/2020' '13/05/2020' '14/05/2020' '15/05/2020' '16/05/2020'
 '17/05/2020' '18/05/2020' '19/05/2020' '21/05/2020' '22/05/2020'
 '23/05/2020' '24/05/2020' '25/05/2020' '26/05/2020' '27/05/2020'
 '28/05/2020' '29/05/2020' '30/05/2020' '31/05/2020' '01/06/2020'
 '02/06/2020' '03/06/2020' '04/06/2020' '05/06/2020' '06/06/2020'
 '07/06/2020' '08/06/2020' '10/06/2020' '11/06/2020' '12/06/2020'
 '13/06/2020' '14/06/2020' '15/06/2020' '16/06/2020' '17/06/2020'
 '18/06/2020' '19/06/2020' '20/06/2020' '21/06/2020' '22/06/2020'
 '23/06/2020' '24/06/2020' '25/06/2020' '26/06/2020' '27/06/2020'
 '28/06/2020' '29/06/2020' '30/06/2020' '01/07/2020' '02/07/2020'
 '03/07/2020' '04/07/2020' '05/07/2020' '06/07/2020' '07/07/2020'
 '08/07/2020' '09/07/2020' '10/07/2020' '11/07/2020' '12/07/2020'
 '13/07/2020' '14/07/2020' '15/07/2020' '16/07/2020' '17/07/2020'
 '18/07/2020' '19/07/2020' '20/07/2020' '21/07/2020' '22/07/2020'
 '23/07/2020' '24/07/2020' '25/07/2020' '26/07/2020' '27/07/2020'
 '28/07/2020' '29/07/2020' '30/07/2020' '31/07/2020' '01/08/2020'
 '02/08/2020' '03/08/2020' '04/08/2020' '05/08/2020' '06/08/2020'
 '07/08/2020' '08/08/2020' '09/08/2020' '10/08/2020' '14/08/2020'
 '17/08/2020' '18/08/2020' '19/08/2020' '20/08/2020' '25/08/2020'
 '28/09/2020' '17/12/2020' '27/04/2021' '01/05/2021' '09/01/2020'
 '10/01/2020' '12/01/2020' '13/01/2020' '14/01/2020' '19/01/2020'
 '20/01/2020' '22/01/2020' '24/01/2020' '29/01/2020' '30/01/2020'
 '31/01/2020' '06/02/2020' '07/02/2020' '08/02/2020' '09/02/2020'
 '11/02/2020' '12/02/2020' '13/02/2020' '14/02/2020' '16/02/2020'
 '19/02/2020' '20/02/2020' '21/02/2020' '22/02/2020' '23/02/2020'
 '24/02/2020' '26/02/2020' '28/02/2020' '29/02/2020' '01/03/2020'
 '02/03/2020' '03/03/2020' '04/03/2020' '05/03/2020' '06/03/2020'
 '08/03/2020' '09/03/2020' '10/03/2020' '11/03/2020' '12/03/2020'
 '13/03/2020' '15/03/2020' '16/03/2020' '17/03/2020' '19/03/2020'
 '20/03/2020' '21/03/2020' '22/03/2020' '23/03/2020' '24/03/2020'
 '25/03/2020' '26/03/2020' '30/03/2020' '31/03/2020' '01/04/2020'
 '03/04/2020' '04/04/2020' '16/04/2020' '19/04/2020' '11/08/2020'
 '12/08/2020' '13/08/2020' '15/08/2020' '16/08/2020' '21/08/2020'
 '22/08/2020' '23/08/2020' '24/08/2020' '26/08/2020' '27/08/2020'
 '28/08/2020' '29/08/2020' '31/08/2020' '02/09/2020' '03/09/2020'
 '04/09/2020' '05/09/2020' '06/09/2020' '07/09/2020' '08/09/2020'
 '14/09/2020' '16/09/2020' '17/09/2020' '18/09/2020' '19/09/2020'
 '20/09/2020' '21/09/2020' '23/09/2020' '24/09/2020' '27/09/2020'
 '05/10/2020' '12/10/2020' '14/10/2020' '16/10/2020' '18/10/2020'
 '20/10/2020' '25/10/2020' '30/10/2020' '04/11/2020' '06/11/2020'
 '08/11/2020' '12/11/2020' '24/11/2020' '15/01/2021' '19/01/2021'
 '20/01/2021' '21/01/2021' '24/01/2021' '25/01/2021' '27/01/2021'
 '28/01/2021' '31/01/2021' '01/02/2021' '03/02/2021' '04/02/2021'
 '06/02/2021' '08/02/2021' '10/02/2021' '11/02/2021' '12/02/2021'
 '18/02/2021' '20/02/2021' '25/02/2021' '26/02/2021' '27/02/2021'
 '07/03/2021' '29/03/2021' '30/03/2021' '01/04/2021' '12/04/2021'
 '14/04/2021' '15/04/2021' '16/04/2021' '17/04/2021' '18/04/2021'
 '25/04/2021' '26/04/2021' '28/04/2021' '29/04/2021' '30/04/2021'
 '02/05/2021' '10/02/2020' '18/12/2020' '05/02/2021' '04/02/2020'
 '29/09/2020' '07/12/2020' '16/12/2020' '19/12/2020' '06/01/2021'
 '17/02/2021' '08/03/2021' '16/03/2021' '17/03/2021' '18/03/2021'
 '20/03/2021' '22/03/2021' '23/03/2021' '24/03/2021' '09/04/2021'
 '10/04/2021' '19/04/2021' '24/04/2021' '01/09/2020' '10/09/2020'
 '31/10/2020' '15/12/2020' '24/12/2020' '23/02/2021' '20/04/2021'
 '19/03/2021' '03/01/2020' '05/01/2020' '07/01/2020' '11/01/2020'
 '15/01/2020' '16/01/2020' '17/01/2020' '18/01/2020' '21/01/2020'
 '23/01/2020' '26/01/2020' '27/01/2020' '28/01/2020' '01/02/2020'
 '02/02/2020' '03/02/2020' '05/02/2020' '17/02/2020' '25/02/2020'
 '27/02/2020' '30/08/2020' '09/09/2020' '11/09/2020' '12/09/2020'
 '13/09/2020' '15/09/2020' '22/09/2020' '04/10/2020' '06/10/2020'
 '07/10/2020' '10/10/2020' '22/10/2020' '26/10/2020' '25/11/2020'
 '27/11/2020' '03/12/2020' '20/12/2020' '25/12/2020' '02/01/2021'
 '22/01/2021' '26/01/2021' '14/02/2021' '19/02/2021' '22/02/2021'
 '14/03/2021' '27/03/2021' '13/04/2021' '22/04/2021' '9999-99-99']
INTUBED [1 0]
PNEUMONIA [0 1]
AGE [ 55  14   0  17  43  64  54  59  49  88  47  86  53  90  61  73  87  60
  42  72  63  62  74  83  57  68  84  66  26  45  70   1  58  65  80  75
  79  50  82  51  67  56  69  77  92  52  78  71  76  48  32  46  39  41
  20  44  40  81  38  36  30  37  85  23  89  31  34   3  10  24   7  97
  25  93  95  35   5  27   6  91   4  33  12  98  18  15  99  29   8  13
  28  19  94  11  21  16  22  96 100   9 101 109 103 102 105 104 106 118
 115]
PREGNANT [0 1]
DIABETES [1 0]
COPD [0 1]
ASTHMA [0 1]
INMSUPR [0 1]
HIPERTENSION [0 1]
OTHER_DISEASE [0 1]
CARDIOVASCULAR [0 1]
OBESITY [0 1]
RENAL_CHRONIC [0 1]
TOBACCO [0 1]
CLASIFFICATION_FINAL [3 7 6 5 1 0 4]
ICU [0 1]
died [1 0]
Training Features Shape: (95858, 19)
Training Labels Shape: (95858,)
Testing Features Shape: (31953, 19)
Testing Labels Shape: (31953,)
score 0.70
Outcomes with RandomForestClassifier model with train set
('Precision:', 0.709367006374599, 'Recall: ', 0.7092662133360398, 'Accuracy:', 0.7012351603413383, 'F1:', 0.709316606274677)
Outcomes with RandomForestClassifier model with test set
('Precision:', 0.7078753472641623, 'Recall: ', 0.7137376689806357, 'Accuracy:', 0.7014990767690045, 'F1:', 0.710794420861128)
Random Forest feature importance, with test set
USMER 0.02
MEDICAL_UNIT 0.11
SEX 0.03
PATIENT_TYPE 0.0
INTUBED 0.42
PNEUMONIA 0.14
AGE 0.22
PREGNANT 0.01
DIABETES 0.0
COPD 0.0
ASTHMA 0.01
INMSUPR 0.0
HIPERTENSION 0.0
OTHER_DISEASE 0.0
CARDIOVASCULAR 0.0
OBESITY 0.0
RENAL_CHRONIC 0.0
TOBACCO 0.01
ICU 0.0
Random Forest feature importance
USMER 0.02 +/- 0.05
MEDICAL_UNIT 0.11 +/- 0.13
SEX 0.03 +/- 0.06
PATIENT_TYPE 0.0 +/- 0.0
INTUBED 0.42 +/- 0.29
PNEUMONIA 0.14 +/- 0.15
AGE 0.22 +/- 0.23
PREGNANT 0.01 +/- 0.03
DIABETES 0.0 +/- 0.0
COPD 0.0 +/- 0.0
ASTHMA 0.01 +/- 0.05
INMSUPR 0.0 +/- 0.01
HIPERTENSION 0.0 +/- 0.01
OTHER_DISEASE 0.0 +/- 0.01
CARDIOVASCULAR 0.0 +/- 0.01
OBESITY 0.0 +/- 0.01
RENAL_CHRONIC 0.0 +/- 0.01
TOBACCO 0.01 +/- 0.03
ICU 0.0 +/- 0.01
Search CV model parameters with random forest classifier
0.7220054665880004
{'criterion': 'entropy', 'max_depth': 8, 'min_samples_split': 2}
RandomForestClassifier(criterion='entropy', max_depth=8, random_state=2021)
Outcomes with model, with parameters from grid search CV, with train set
('Precision:', 0.7240250191172722, 'Recall: ', 0.7495382117121688, 'Accuracy:', 0.7244465772288177, 'F1:', 0.7365607484092315)
Outcomes with model, with parameters from grid search CV, with test set
('Precision:', 0.7182275225067228, 'Recall: ', 0.7481427353550115, 'Accuracy:', 0.7197133289518981, 'F1:', 0.732879980911477)
RandomForestClassifier_Grid_search_CV_report, with test data
              precision    recall  f1-score   support

           0       0.72      0.69      0.71     15531
           1       0.72      0.75      0.73     16422

    accuracy                           0.72     31953
   macro avg       0.72      0.72      0.72     31953
weighted avg       0.72      0.72      0.72     31953

Random Forest feature importance
USMER 0.02 +/- 0.01
MEDICAL_UNIT 0.12 +/- 0.04
SEX 0.02 +/- 0.01
PATIENT_TYPE 0.0 +/- 0.0
INTUBED 0.4 +/- 0.07
PNEUMONIA 0.1 +/- 0.04
AGE 0.22 +/- 0.07
PREGNANT 0.01 +/- 0.01
DIABETES 0.0 +/- 0.0
COPD 0.01 +/- 0.0
ASTHMA 0.01 +/- 0.01
INMSUPR 0.01 +/- 0.01
HIPERTENSION 0.0 +/- 0.0
OTHER_DISEASE 0.01 +/- 0.0
CARDIOVASCULAR 0.01 +/- 0.0
OBESITY 0.01 +/- 0.0
RENAL_CHRONIC 0.0 +/- 0.0
TOBACCO 0.02 +/- 0.01
ICU 0.02 +/- 0.01
Fitting 10 folds for each of 48 candidates, totalling 480 fits
Search CV parameters with KNN model
0.6930981398820942
{'algorithm': 'brute', 'metric': 'manhattan', 'n_neighbors': 13}
KNeighborsClassifier(algorithm='brute', metric='manhattan', n_neighbors=13)
Outcomes with KNN Grid search CV model, on train set
('Precision:', 0.7095155408925161, 'Recall: ', 0.8294123617172435, 'Accuracy:', 0.7378100940975193, 'F1:', 0.7647934116325863)
Outcomes with KNN Grid search CV model, on test set
('Precision:', 0.6651110313349402, 'Recall: ', 0.7897332846181951, 'Accuracy:', 0.6875723719212593, 'F1:', 0.722084574482893)
Outcomes with KNN Grid search CV model, on test set
              precision    recall  f1-score   support

           0       0.72      0.58      0.64     15531
           1       0.67      0.79      0.72     16422

    accuracy                           0.69     31953
   macro avg       0.69      0.68      0.68     31953
weighted avg       0.69      0.69      0.68     31953

